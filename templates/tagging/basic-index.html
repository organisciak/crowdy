<tagging-instructions class="instructions" ng-controller="instructionsController"></tagging-instructions>
<br />

<form name="forms.turkForm" id="turkForm" method="POST" ng-submit="submitForm($event)" novalidate>
<div class="row itemgrid" masonry reload-on-show>
	<tag-item class="masonry-brick col-md-4 col-sm-4 col-xs-6" ng-repeat="item in taskset.tasks" ng-controller='tagTaskItemController'></tag-item>
</div>

<!-- START FEEDBACK -->
<div class="row" ng-hide="preview">
    <feedback-form ng-controller='feedbackCtrl'></feedback-form> 
</div>
<!-- END FEEDBACK -->
<!-- START SUBMIT -->
<div class="row">
	<alert type='warning' ng-show="forms.turkForm.$submitted && !forms.turkForm.$valid"> Sorry but {{forms.turkForm.$error.pattern.length + forms.turkForm.$error.required.length}} errors exist above. Please fix and resubmit. </alert>
	

	<alert type="info" ng-show="bonusStructure.laterTask > 0">Hey, we like when you stick around. If you do more tasks, we'll give you a <strong>{{bonusStructure.laterTask | currency : $}} bonus</strong> for each extra assignment.</alert>

	<alert type="warning" ng-show=".turkForm.$submitted && !allChecked">
	Don't forget to check all your answers!
	</alert>

	<input type="hidden" name="assignmentId" id="myAssignmentId" value="{{assignmentId}}" />
 <input id="submitButton" type="submit" name="submit" 
 class="btn btn-primary" 
 ng-disabled="submitBlocked || (forms.turkForm.$submitted && !forms.turkForm.$valid || !!($root.error)) || preview" 
 ng-value="preview ? 'Previewing' : 'Submit'" />
</div>
<span ng-show="debug"><strong>DEBUG: data: </strong><pre>{{taskset | json: 4 }}</pre></span>
</div>
<!-- END SUBMIT-->
</form>


<!-- TURK SUBMISSION FORM, because ng-submit and action don't mix -->
<form name='forms.turkHiddenForm' method="POST" id='turkHiddenForm' action={{formSubmitTo}}>
<input type="hidden" name="assignmentId" id="myAssignmentId" value="{{assignmentId}}" />
<input type="hidden" name="test" value="{{ taskset | json }}" />
</form>

<div style="padding-top:100px;margin-top:100px;"></div>
